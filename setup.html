<!DOCTYPE html>
<html>
<head>
    <title>Face ID Generator (CDN Version)</title>
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <style>
        body { background: #1a1a1a; color: white; text-align: center; font-family: sans-serif; padding: 20px; }
        #status { color: #aaa; margin-bottom: 20px; }
        textarea { width: 90%; height: 100px; background: #222; color: #00ff88; border: 1px solid #444; }
        button { padding: 15px; font-size: 18px; cursor: pointer; background: #007aff; color: white; border: none; border-radius: 8px; margin-top: 10px; display:none;}
        video { border: 2px solid #555; border-radius: 10px; display:none; max-width: 100%; }
    </style>
</head>
<body>
    <h2>Scholar Zolo Setup</h2>
    <div id="status">Connecting to AI Cloud...</div>
    <video id="video" autoplay muted playsinline></video>
    <br>
    <button id="scanBtn" onclick="scanFace()">üì∏ Scan Face</button>
    <br><br>
    <textarea id="result" placeholder="Your numbers will appear here..."></textarea>

    <script>
        const status = document.getElementById('status');
        
        async function loadModels() {
            try {
                // LOAD FROM INTERNET (Reliable)
                const MODEL_URL = 'https://justadudewhohacks.github.io/face-api.js/models';

                status.innerText = "Downloading Brains from Cloud...";
                
                await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
                await faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL);
                await faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL);

                status.innerText = "Ready! Starting Camera...";
                startCamera();
            } catch (err) {
                status.innerText = "Error: " + err.message;
                status.style.color = "red";
            }
        }

        async function startCamera() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: {} });
            document.getElementById('video').srcObject = stream;
            document.getElementById('video').style.display = "inline-block";
            document.getElementById('scanBtn').style.display = "inline-block";
            status.innerText = "Look at camera & click Scan.";
        }

        async function scanFace() {
            status.innerText = "Scanning...";
            const detection = await faceapi.detectSingleFace(document.getElementById('video'), new faceapi.TinyFaceDetectorOptions())
                .withFaceLandmarks()
                .withFaceDescriptor();

            if (detection) {
                document.getElementById('result').value = JSON.stringify(Object.values(detection.descriptor));
                status.innerText = "‚úÖ Success! Copy the numbers below.";
                status.style.color = "#00ff88";
            } else {
                status.innerText = "‚ùå No face found. Try again.";
                status.style.color = "orange";
            }
        }

        loadModels();
    </script>
</body>
</html>